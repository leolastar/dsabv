<% provide(:title, 'Roster') %>
<div class="row">
  <div class="col-xs-12 col-sm-10 col-sm-offset-1 jumbotron">
    <% if logged_in? && (current_user.admin || current_user.staff) %>
      <h1><%= @buddy_walk.title %></h1>
      <ul class="col-xs-12 col-md-12" id="details">
        <%= @buddy_walk.date %><br>
        <%= @buddy_walk.place %><br><br>
        <li><%= @buddy_walk.buddy_slot.start_time.strftime("%I:%M %p") %> -- <%= @buddy_walk.buddy_slot.end_time.strftime("%I:%M %p") %></li>
          <table class="table">
            <tr>
              <th class="col-xs-2"></th>
              <th class="col-xs-2">Name</th>
              <th class="col-xs-2">Email</th>
              <th class="col-xs-2">Phone</th>
              <th class="col-xs-2">Emerg. Phone</th>
            </tr>
            <% @buddy_walk.buddy_slot.users.each do |user| %>
              <tr>
                <% if user.appointment_buddy(@buddy_walk.buddy_slot).is_checkedin %>
                  <td><%= link_to "Checked", root_path, class: "btn btn-primary disabled home-page" %></td>
                <% else %>
                <td><%= link_to "Check in", checkin_buddy_walk_path(:id => user.id, :buddy_slot_id => @buddy_walk.buddy_slot.id, :buddy_walk_id => @buddy_walk.id), class: "btn btn-primary home-page" %></td>
                <% end %>
                <td><%= link_to user.name, user %></td>
                <td><%= user.email %></td>
                <td><%= user.phone %></td>
                <td><%= user.emergency_contact_phone %></td>
              </tr>
            <% end %>
          </table>
        <%= link_to "Back", buddy_walk_path(@buddy_walk) %>
      </ul>
      <% else %>
        Access Denied
      <% end %>
  </div>
</div>

